(this.webpackJsonprunnerapp=this.webpackJsonprunnerapp||[]).push([[0],{137:function(e,t,a){e.exports=a.p+"static/media/poll.4aa941b9.svg"},175:function(e,t,a){e.exports=a(362)},180:function(e,t,a){},183:function(e,t,a){},238:function(e,t,a){},261:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},347:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){},354:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(9),i=a.n(s),o=(a(180),a(55),a(24)),l=a(19),c=a(20),u=a(22),m=a(21),h=a(13),d=a(23),p=(a(139),a(83)),g=(a(183),a(59)),v="http://Runbook-env.jcsnnv3uqe.ap-northeast-1.elasticbeanstalk.com:8089",f="accessToken",b=4,y=40,E=3,S=40,O=16,j=120,k=60,C=4,w=20,N=function(e){var t=new Headers({"Content-Type":"application/json"});null!=localStorage.getItem(f)&&t.append("Authorization","Bearer "+localStorage.getItem(f));var a={headers:t};return e=Object.assign({},a,e),fetch(e.url,e).then((function(e){return e.json().then((function(t){return e.ok?t:Promise.reject(t)})).catch((function(e){console.log(e)}))}))};a(161);var L=a(60),M=(a(73),a(7)),P=(a(140),a(104));function U(e){var t=r.a.createElement(M.a,{type:"loading-3-quarters",style:{fontSize:30},spin:!0});return r.a.createElement(P.a,{indicator:t,style:{display:"block",textAlign:"center",marginTop:30}})}a(238);var I=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={runs:[],filtered:[],isLoading:!1},a.loadRunList=a.loadRunList.bind(Object(h.a)(a)),a.handleDelete=a.handleDelete.bind(Object(h.a)(a)),a.handleChange=a.handleChange.bind(Object(h.a)(a)),a.handleJoin=a.handleJoin.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadRunList",value:function(){var e,t,a=this;"undefined"!=typeof this.props.currentUser&&"ALL_RUNS"!=this.props.type?(t=this.props.currentUser.id,e=N({url:v+"/users/"+t+"/runs",method:"GET"})):e=N({url:v+"/joinruns",method:"GET"}),e&&(this.setState({isLoading:!0}),e.then((function(e){a.setState({runs:e,filtered:e,isLoading:!1})})).catch((function(e){a.setState({isLoading:!1})})))}},{key:"handleDelete",value:function(e,t){e.preventDefault(),N({url:v+"/runs/"+t,method:"DELETE"}),this.setState({filtered:this.state.runs.filter((function(e){return e.id!==t}))}),o.a.success({message:"RunBook",description:"Thank you! You have successfully deleted a run event!"})}},{key:"componentDidMount",value:function(){this.loadRunList(),this.setState({filtered:this.state.runs})}},{key:"handleJoin",value:function(e,t){if("undefined"==typeof this.props.currentUser)return r.a.createElement(g.a,{to:{pathname:"/login",state:{from:this.props.location}}});var a,n,s;e.preventDefault(),a=this.props.currentUser.id,n=t.id,s=t,N({url:v+"/users/"+a+"/joinrun/"+n,method:"PUT",body:JSON.stringify(s)}),o.a.success({message:"RunBook",description:"Thank you! You have successfully joined a run event!"})}},{key:"handleChange",value:function(e){var t=[];""!==e.target.value?(t=this.state.runs.filter((function(t){var a=t.location.toLowerCase(),n=e.target.value.toLowerCase();return a.includes(n)})),console.log(t)):t=this.state.runs,this.setState({filtered:t})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"runs-container"},this.state.isLoading||0!==this.state.runs.length?null:r.a.createElement("div",{className:"no-runs-found"},r.a.createElement("br",null),r.a.createElement("span",null,"No Runs Found.")),this.state.isLoading?r.a.createElement(U,null):null,r.a.createElement("div",{className:"runs-list-scroll"},r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("input",{type:"text",className:"search-input",onChange:this.handleChange,placeholder:"Search Run Locations ..."}),r.a.createElement("ul",null,"...")),r.a.createElement(L.a,{itemLayout:"vertical",size:"large",pagination:{pageSize:5},dataSource:this.state.filtered,renderItem:function(t){return r.a.createElement(L.a.Item,{key:t.id,actions:e.props.currentUser&&e.props.userRun?[r.a.createElement(M.a,{type:"delete",key:"list-vertical-delete",onClick:function(a){return e.handleDelete(a,t.id)}})]:[r.a.createElement(M.a,{type:"user-add",key:"list-vertical-user-add",onClick:function(a){return e.handleJoin(a,t)}})]},r.a.createElement(L.a.Item.Meta,{title:t.title}),"Location: ",t.location,r.a.createElement("br",null),"Time: ",t.creationDateTime)}})))}}]),t}(n.Component),T=Object(g.g)(I),D=(a(50),a(28)),A=(a(363),a(170)),R=a(41),F=(a(68),a(33)),z=(a(78),a(34));a(261);function x(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function B(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?x(a,!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):x(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var Y=z.a.Item,J=F.a.TextArea,G=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).validateTitle=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please enter your title!"}:{validateStatus:"success",errorMsg:null}},a.validateLocation=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please enter your location!"}:e.length>S?{validateStatus:"error",errorMsg:"Location is too long (Maximum ".concat(S," characters allowed)")}:e.length<E?{validateStatus:"error",errorMsg:"Location is too short (Minimum ".concat(E," characters needed)")}:{validateStatus:"success",errorMsg:null}},a.handleDateChange=function(e,t){a.setState({creationDateTime:{value:t}})},a.state={title:{value:""},location:{value:""},creationDateTime:{defaultValue:"01-10-2019 - 9:45"}},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleTitleChange=a.handleTitleChange.bind(Object(h.a)(a)),a.handleLocationChange=a.handleLocationChange.bind(Object(h.a)(a)),a.handleDateChange=a.handleDateChange.bind(Object(h.a)(a)),a.isFormInvalid=a.isFormInvalid.bind(Object(h.a)(a)),a.currentUser=a.props.currentUser,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={title:this.state.title.value,location:this.state.location.value,creationDateTime:this.state.creationDateTime.value};(function(e,t){return N({url:v+"/users/"+e+"/runs",method:"POST",body:JSON.stringify(t)})})(this.props.currentUser.id,a).then((function(e){o.a.success({message:"RunBook",description:"Thank you! You have successfully created a run event!"}),t.props.history.push("/mypage")})).catch((function(e){401===e.status?t.props.handleLogout("/login","error","You have been logged out. Please login create run."):o.a.error({message:"Running App",description:e.message||"Sorry! Something went wrong. Please try again!"})}))}},{key:"handleTitleChange",value:function(e,t){var a=e.target.value;this.setState({title:B({value:a},t(a))})}},{key:"handleLocationChange",value:function(e,t){var a=e.target.value;this.setState({location:B({value:a},t(a))})}},{key:"isFormInvalid",value:function(){if("success"!==this.state.title.validateStatus&&"success"!==this.state.location.validateStatus)return!0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"new-run-container"},r.a.createElement("h1",{className:"page-title"},"Create Run"),r.a.createElement("div",{className:"new-run-content"},r.a.createElement(z.a,{onSubmit:this.handleSubmit,className:"create-run-form"},r.a.createElement(Y,{validateStatus:this.state.title.validateStatus,help:this.state.title.errorMsg,className:"run-form-row"},r.a.createElement(J,{placeholder:"Enter your title",style:{fontSize:"22px"},name:"title",autoComplete:"off",value:this.state.title.value,onChange:function(t){return e.handleTitleChange(t,e.validateTitle)}})),r.a.createElement(Y,{validateStatus:this.state.location.validateStatus,help:this.state.location.errorMsg,className:"run-form-row"},r.a.createElement(J,{placeholder:"Enter your location",style:{fontSize:"16px"},name:"location",autoComplete:"off",value:this.state.location.value,onChange:function(t){return e.handleLocationChange(t,e.validateLocation)}})),r.a.createElement(Y,{className:"run-form-row"},r.a.createElement(A.a,{showTime:!0,format:"DD-MM-YYYY - HH:mm",onChange:this.handleDateChange})),r.a.createElement(Y,{className:"run-form-row"},r.a.createElement(D.a,{type:"primary",htmlType:"submit",size:"large",disabled:this.isFormInvalid(),className:"create-run-form-button"},"Create Run")))))}}]),t}(n.Component);a(344);function H(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function q(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?H(a,!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):H(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var W=z.a.Item,_=F.a.TextArea,K=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).validateTitle=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please enter your title!"}:{validateStatus:"success",errorMsg:null}},a.validateContent=function(e){return 0===e.length?{validateStatus:"error",errorMsg:"Please enter your content!"}:{validateStatus:"success",errorMsg:null}},a.state={title:{value:""},content:{value:""}},a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.handleTitleChange=a.handleTitleChange.bind(Object(h.a)(a)),a.handleContentChange=a.handleContentChange.bind(Object(h.a)(a)),a.isFormInvalid=a.isFormInvalid.bind(Object(h.a)(a)),a.currentUser=a.props.currentUser,a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a={title:this.state.title.value,content:this.state.content.value};(function(e,t){return N({url:v+"/users/"+e+"/posts",method:"POST",body:JSON.stringify(t)})})(this.props.currentUser.id,a).then((function(e){o.a.success({message:"RunBook",description:"Thank you! You have successfully created a post event!"}),t.props.history.push("/mypage")})).catch((function(e){401===e.status?t.props.handleLogout("/login","error","You have been logged out. Please login create post."):o.a.error({message:"RunBook",description:e.message||"Sorry! Something went wrong. Please try again!"})}))}},{key:"handleTitleChange",value:function(e,t){var a=e.target.value;this.setState({title:q({value:a},t(a))})}},{key:"handleContentChange",value:function(e,t){var a=e.target.value;this.setState({content:q({value:a},t(a))})}},{key:"isFormInvalid",value:function(){if("success"!==this.state.title.validateStatus&&"success"!==this.state.content.validateStatus)return!0}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"new-post-container"},r.a.createElement("h1",{className:"page-title"},"Create Post"),r.a.createElement("div",{className:"new-post-content"},r.a.createElement(z.a,{onSubmit:this.handleSubmit,className:"create-post-form"},r.a.createElement(W,{validateStatus:this.state.title.validateStatus,help:this.state.title.errorMsg,className:"post-form-row"},r.a.createElement(_,{placeholder:"Enter your title",style:{fontSize:"22px"},name:"title",autoComplete:"off",value:this.state.title.value,onChange:function(t){return e.handleTitleChange(t,e.validateTitle)}})),r.a.createElement(W,{validateStatus:this.state.content.validateStatus,help:this.state.content.errorMsg,className:"post-form-row"},r.a.createElement(_,{placeholder:"Enter your content",style:{fontSize:"16px"},name:"content",autoComplete:"off",value:this.state.content.value,onChange:function(t){return e.handleContentChange(t,e.validateContent)}})),r.a.createElement(W,{className:"post-form-row"},r.a.createElement(D.a,{type:"primary",htmlType:"submit",size:"large",disabled:this.isFormInvalid(),className:"create-post-form-button"},"Create Post")))))}}]),t}(n.Component),V=(a(345),a(26)),$=z.a.Item,Q=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=z.a.create()(X);return r.a.createElement("div",{className:"login-container"},r.a.createElement("h1",{className:"page-title"},"Login"),r.a.createElement("div",{className:"login-content"},r.a.createElement(e,{onLogin:this.props.onLogin})))}}]),t}(n.Component),X=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.props.form.validateFields((function(e,a){e||function(e){return N({url:v+"/auth/signin",method:"POST",body:JSON.stringify(e)})}(Object.assign({},a)).then((function(e){localStorage.setItem(f,e.accessToken),t.props.onLogin()})).catch((function(e){401===e.status?o.a.error({message:"RunBook",description:"Your Email or Password is incorrect. Please try again!"}):o.a.error({message:"RunBook",description:e.message||"Sorry! Something went wrong. Please try again!"})}))}))}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return r.a.createElement(z.a,{onSubmit:this.handleSubmit,className:"login-form"},r.a.createElement($,null,e("email",{rules:[{required:!0,message:"Please input your email!"}]})(r.a.createElement(F.a,{prefix:r.a.createElement(M.a,{type:"user"}),size:"large",name:"email",placeholder:"Email"}))),r.a.createElement($,null,e("password",{rules:[{required:!0,message:"Please input your Password!"}]})(r.a.createElement(F.a,{prefix:r.a.createElement(M.a,{type:"lock"}),size:"large",name:"password",type:"password",placeholder:"Password"}))),r.a.createElement($,null,r.a.createElement(D.a,{type:"primary",htmlType:"submit",size:"large",className:"login-form-button"},"Login"),"Or ",r.a.createElement(V.b,{to:"/signup"},"register now!")))}}]),t}(n.Component),Z=Q,ee=(a(160),a(110));a(347);function te(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ae(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?te(a,!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):te(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var ne=z.a.Item,re=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).validateName=function(e){return e.length<b?{validateStatus:"error",errorMsg:"Name is too short (Minimum ".concat(b," characters needed.)")}:e.length>y?{validationStatus:"error",errorMsg:"Name is too long (Maximum ".concat(y," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.validateEmail=function(e){return e?RegExp("[^@ ]+@[^@ ]+\\.[^@ ]+").test(e)?e.length>k?{validateStatus:"error",errorMsg:"Email is too long (Maximum ".concat(k," characters allowed)")}:{validateStatus:null,errorMsg:null}:{validateStatus:"error",errorMsg:"Email not valid"}:{validateStatus:"error",errorMsg:"Email may not be empty"}},a.validateLocation=function(e){return e.length<E?{validateStatus:"error",errorMsg:"location is too short (Minimum ".concat(E," characters needed.)")}:e.length>S?{validationStatus:"error",errorMsg:"Location is too long (Maximum ".concat(S," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.validateAge=function(e){return e<O?{validateStatus:"error",errorMsg:"Age is too short (Minimum ".concat(O,"  needed.)")}:e>j?{validationStatus:"error",errorMsg:"Age is too much (Maximum ".concat(j," allowed.)")}:{validateStatus:"success",errorMsg:null}},a.validatePassword=function(e){return e.length<C?{validateStatus:"error",errorMsg:"Password is too short (Minimum ".concat(C," characters needed.)")}:e.length>w?{validationStatus:"error",errorMsg:"Password is too long (Maximum ".concat(w," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.state={name:{value:""},location:{value:""},age:{value:null},email:{value:""},password:{value:""}},a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a.handleAgeChange=a.handleAgeChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.validateEmailAvailability=a.validateEmailAvailability.bind(Object(h.a)(a)),a.isFormInvalid=a.isFormInvalid.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,r=a.value;this.setState(Object(R.a)({},n,ae({value:r},t(r))))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),function(e){return N({url:v+"/auth/signup",method:"POST",body:JSON.stringify(e)})}({name:this.state.name.value,email:this.state.email.value,age:this.state.age.value,location:this.state.location.value,password:this.state.password.value}).then((function(e){o.a.success({message:"RunBook",description:"Thank you! You're successfully registered. Please Login to continue!"}),t.props.history.push("/login")})).catch((function(e){o.a.error({message:"Runbook",description:e.message||"Sorry! Something went wrong. Please try again!"})}))}},{key:"isFormInvalid",value:function(){return!("success"===this.state.name.validateStatus&&"success"===this.state.location.validateStatus&&"success"===this.state.email.validateStatus&&"success"===this.state.password.validateStatus)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"signup-container"},r.a.createElement("h1",{className:"page-title"},"Sign Up"),r.a.createElement("div",{className:"signup-content"},r.a.createElement(z.a,{onSubmit:this.handleSubmit,className:"signup-form"},r.a.createElement(ne,{label:"Full Name",validateStatus:this.state.name.validateStatus,help:this.state.name.errorMsg},r.a.createElement(F.a,{size:"large",name:"name",autoComplete:"off",placeholder:"Your full name",value:this.state.name.value,onChange:function(t){return e.handleInputChange(t,e.validateName)}})),r.a.createElement(ne,{label:"Location",validateStatus:this.state.location.validateStatus,help:this.state.location.errorMsg},r.a.createElement(F.a,{size:"large",name:"location",autoComplete:"off",placeholder:"User Location",value:this.state.location.value,onChange:function(t){return e.handleInputChange(t,e.validateLocation)}})),r.a.createElement(ne,{label:"Age",validateStatus:this.state.age.validateStatus,help:this.state.age.errorMsg},r.a.createElement(ee.a,{size:"large",name:"age",type:"number",autoComplete:"off",placeholder:"16",value:this.state.age.value,onChange:this.handleAgeChange})),r.a.createElement(ne,{label:"Email",hasFeedback:!0,validateStatus:this.state.email.validateStatus,help:this.state.email.errorMsg},r.a.createElement(F.a,{size:"large",name:"email",type:"email",autoComplete:"off",placeholder:"Your email",value:this.state.email.value,onBlur:this.validateEmailAvailability,onChange:function(t){return e.handleInputChange(t,e.validateEmail)}})),r.a.createElement(ne,{label:"Password",validateStatus:this.state.password.validateStatus,help:this.state.password.errorMsg},r.a.createElement(F.a,{size:"large",name:"password",type:"password",autoComplete:"off",placeholder:"A password between 4 to 20 characters",value:this.state.password.value,onChange:function(t){return e.handleInputChange(t,e.validatePassword)}})),r.a.createElement(ne,null,r.a.createElement(D.a,{type:"primary",htmlType:"submit",size:"large",className:"signup-form-button",disabled:this.isFormInvalid()},"Sign up"),"Already registered? ",r.a.createElement(V.b,{to:"/login"},"Login now!")))))}},{key:"handleAgeChange",value:function(e){this.setState(Object(R.a)({},"age",ae({value:e},this.validateAge(e))))}},{key:"validateEmailAvailability",value:function(){var e,t=this,a=this.state.email.value,n=this.validateEmail(a);"error"!==n.validateStatus?(this.setState({email:{value:a,validateStatus:"validating",errorMsg:null}}),(e=a,N({url:v+"/users/checkemailavailability?email="+e,method:"GET"})).then((function(e){e.available?t.setState({email:{value:a,validateStatus:"success",errorMsg:null}}):t.setState({email:{value:a,validateStatus:"error",errorMsg:"This Email is already registered"}})})).catch((function(e){t.setState({email:{value:a,validateStatus:"success",errorMsg:null}})}))):this.setState({email:ae({value:a},n)})}}]),t}(n.Component),se=(a(348),a(168)),ie=(a(350),a(138)),oe=["#F44336","#e91e63","#9c27b0","#673ab7","#ff9800","#ff5722","#795548","#607d8b","#3f51b5","#2196F3","#00bcd4","#009688","#2196F3","#32c787","#00BCD4","#ff5652","#ffc107","#ff85af","#FF9800","#39bbb0","#4CAF50","#ffeb3b","#ffc107"];function le(e){e=e.substr(0,6);for(var t=0,a=0;a<e.length;a++)t=31*t+e.charCodeAt(a);var n=Math.abs(t%oe.length);return oe[n]}a(352),a(353);var ce=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"page-not-found"},r.a.createElement("h1",{className:"title"},"404"),r.a.createElement("div",{className:"desc"},"The Page you're looking for was not found."),r.a.createElement(V.b,{to:"/"},r.a.createElement(D.a,{className:"go-back-btn",type:"primary",size:"large"},"Go Back")))}}]),t}(n.Component),ue=(a(354),function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"server-error-page"},r.a.createElement("h1",{className:"server-error-title"},"500"),r.a.createElement("div",{className:"server-error-desc"},"Oops! Something went wrong at our Server. Why don't you go back?"),r.a.createElement(V.b,{to:"/"},r.a.createElement(D.a,{className:"server-error-go-back-btn",type:"primary",size:"large"},"Go Back")))}}]),t}(n.Component)),me=(a(355),function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={posts:[],isLoading:!1},a.loadPostList=a.loadPostList.bind(Object(h.a)(a)),a.handleDelete=a.handleDelete.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadPostList",value:function(){var e,t,a=this;t=this.props.currentUser.id,(e=N({url:v+"/users/"+t+"/posts",method:"GET"}))&&(this.setState({isLoading:!0}),e.then((function(e){a.setState({posts:e,isLoading:!1})})).catch((function(e){a.setState({isLoading:!1})})))}},{key:"handleDelete",value:function(e,t){var a;e.preventDefault(),a=this.props.currentUser.id,N({url:v+"/users/"+a+"/posts/"+t,method:"DELETE"}),this.setState({posts:this.state.posts.filter((function(e){return e.id!==t}))}),o.a.success({message:"RunBook",description:"Thank you! You have successfully deleted a post!"})}},{key:"componentDidMount",value:function(){this.loadPostList()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"posts-container"},this.state.isLoading||0!==this.state.posts.length?null:r.a.createElement("div",{className:"no-posts-found"},r.a.createElement("span",null,"No Posts Found.")),this.state.isLoading?r.a.createElement(U,null):null,r.a.createElement("div",{className:"posts-list-scroll"},r.a.createElement(L.a,{itemLayout:"vertical",size:"large",pagination:{pageSize:5},dataSource:this.state.posts,renderItem:function(t){return r.a.createElement(L.a.Item,{key:t.id,actions:[r.a.createElement(M.a,{type:"delete",key:"list-vertical-delete",onClick:function(a){return e.handleDelete(a,t.id)}})]},r.a.createElement(L.a.Item.Meta,{title:t.title}),t.content)}})))}}]),t}(n.Component)),he=Object(g.g)(me),de=ie.a.TabPane,pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={user:null,isLoading:!1},a.loadUserProfile=a.loadUserProfile.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadUserProfile",value:function(e){var t=this;this.setState({isLoading:!0}),function(e){return N({url:v+"/users/"+e,method:"GET"})}(e).then((function(e){t.setState({user:e,isLoading:!1})})).catch((function(e){404===e.status?t.setState({notFound:!0,isLoading:!1}):t.setState({serverError:!0,isLoading:!1})}))}},{key:"componentDidMount",value:function(){this.loadUserProfile(this.props.currentUser.id)}},{key:"render",value:function(){if(this.state.isLoading)return r.a.createElement(U,null);if(this.state.notFound)return r.a.createElement(ce,null);if(this.state.serverError)return r.a.createElement(ue,null);return r.a.createElement("div",{className:"profile"},this.state.user?r.a.createElement("div",{className:"user-profile"},r.a.createElement("div",{className:"user-details"},r.a.createElement("div",{className:"user-avatar"},r.a.createElement(se.a,{className:"user-avatar-circle",style:{backgroundColor:le(this.state.user.name)}},this.state.user.name[0].toUpperCase())),r.a.createElement("div",{className:"user-summary"},r.a.createElement("div",{className:"full-name"},this.state.user.name),r.a.createElement("div",{className:"age"},"Age: ",this.state.user.age),r.a.createElement("div",{className:"location"},this.state.user.location))),r.a.createElement("div",{className:"user-poll-details"},r.a.createElement(ie.a,{defaultActiveKey:"1",animated:!1,tabBarStyle:{textAlign:"center"},size:"large",className:"profile-tabs"},r.a.createElement(de,{tab:"User Run Events",key:"1"},r.a.createElement(T,{currentUser:this.props.currentUser,userRun:!0,type:"USER_PARTICIPATED_RUNS"})),r.a.createElement(de,{tab:"All Run Events",key:"2"},r.a.createElement(T,{currentUser:this.props.currentUser,type:"ALL_RUNS"})),r.a.createElement(de,{tab:"Posts",key:"3"},r.a.createElement(he,{currentUser:this.props.currentUser}))))):null)}}]),t}(n.Component);a(356);function ge(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function ve(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?ge(a,!0).forEach((function(t){Object(R.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ge(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var fe=z.a.Item,be=(F.a.TextArea,function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).validateName=function(e){return e.length<b?{validateStatus:"error",errorMsg:"Name is too short (Minimum ".concat(b," characters needed.)")}:e.length>y?{validationStatus:"error",errorMsg:"Name is too long (Maximum ".concat(y," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.validateLocation=function(e){return e.length<E?{validateStatus:"error",errorMsg:"location is too short (Minimum ".concat(E," characters needed.)")}:e.length>S?{validationStatus:"error",errorMsg:"Location is too long (Maximum ".concat(S," characters allowed.)")}:{validateStatus:"success",errorMsg:null}},a.validateAge=function(e){return e<O?{validateStatus:"error",errorMsg:"Age is too short (Minimum ".concat(O,"  needed.)")}:e>j?{validationStatus:"error",errorMsg:"Age is too much (Maximum ".concat(j," allowed.)")}:{validateStatus:"success",errorMsg:null}},a.state={name:{value:""},location:{value:""},age:{value:null},email:{value:""}},a.handleInputChange=a.handleInputChange.bind(Object(h.a)(a)),a.handleAgeChange=a.handleAgeChange.bind(Object(h.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(h.a)(a)),a.isFormInvalid=a.isFormInvalid.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleInputChange",value:function(e,t){var a=e.target,n=a.name,r=a.value;this.setState(Object(R.a)({},n,ve({value:r},t(r))))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault();var a,n,r={name:this.state.name.value,age:this.state.age.value,location:this.state.location.value,email:this.props.currentUser.email,password:"dummyValue"};(a=this.props.currentUser.id,n=r,N({url:v+"/users/"+a,method:"PUT",body:JSON.stringify(n)})).then((function(e){o.a.success({message:"EditBook",description:"Thank you! You have successfully edited profile"}),t.props.history.push("/mypage")})).catch((function(e){401===e.status?t.props.handleLogout("/login","error","You have been logged out. Please login create edit."):o.a.error({message:"EditBook App",description:e.message||"Sorry! Something went wrong. Please try again!"})}))}},{key:"isFormInvalid",value:function(){return!("success"===this.state.name.validateStatus&&"success"===this.state.location.validateStatus)}},{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"new-edit-container"},r.a.createElement("h1",{className:"page-title"}," Edit Profile"),r.a.createElement("div",{className:"new-edit-content"},r.a.createElement(z.a,{onSubmit:this.handleSubmit,className:"create-edit-form"},r.a.createElement(fe,{label:"Full Name",validateStatus:this.state.name.validateStatus,help:this.state.name.errorMsg},r.a.createElement(F.a,{size:"large",name:"name",autoComplete:"off",placeholder:this.props.currentUser.name,value:this.state.name.value,onChange:function(t){return e.handleInputChange(t,e.validateName)}})),r.a.createElement(fe,{label:"Location",validateStatus:this.state.location.validateStatus,help:this.state.location.errorMsg},r.a.createElement(F.a,{size:"large",name:"location",autoComplete:"off",placeholder:this.props.currentUser.location,value:this.state.location.value,onChange:function(t){return e.handleInputChange(t,e.validateLocation)}})),r.a.createElement(fe,{label:"Age",validateStatus:this.state.age.validateStatus,help:this.state.age.errorMsg},r.a.createElement(ee.a,{size:"large",name:"age",type:"number",autoComplete:"off",placeholder:this.props.currentUser.age,value:this.state.age.value,onChange:this.handleAgeChange})),r.a.createElement(fe,{label:"Email",hasFeedback:!0,validateStatus:this.state.email.validateStatus},r.a.createElement(F.a,{size:"large",name:"email",type:"email",autoComplete:"off",placeholder:this.props.currentUser.email,disabled:!0})),r.a.createElement(fe,{className:"edit-form-row"},r.a.createElement(D.a,{type:"primary",htmlType:"submit",size:"large",disabled:this.isFormInvalid(),className:"create-edit-form-button"},"Create Edit")))))}},{key:"handleAgeChange",value:function(e){this.setState(Object(R.a)({},"age",ve({value:e},this.validateAge(e))))}}]),t}(n.Component)),ye=(a(357),a(171)),Ee=(a(364),a(40)),Se=(a(361),a(137)),Oe=a.n(Se),je=p.a.Header,ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleMenuClick=a.handleMenuClick.bind(Object(h.a)(a)),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"handleMenuClick",value:function(e){"logout"===e.key&&this.props.onLogout()}},{key:"render",value:function(){var e;return e=null!=this.props.currentUser?[r.a.createElement(Ee.a.Item,{key:"/"},r.a.createElement(V.b,{to:"/mypage"},r.a.createElement(M.a,{type:"home",className:"nav-icon"}))),r.a.createElement(Ee.a.Item,{key:"/runs"},r.a.createElement(V.b,{to:"/runs"},r.a.createElement("img",{src:Oe.a,alt:"run",className:"poll-icon"}),"  New Run")),r.a.createElement(Ee.a.Item,{key:"/posts"},r.a.createElement(V.b,{to:"/posts"},r.a.createElement("img",{src:Oe.a,alt:"post",className:"poll-icon"}),"  New Post")),r.a.createElement(Ee.a.Item,{key:"/profile",className:"profile-menu"},r.a.createElement(Ce,{currentUser:this.props.currentUser,handleMenuClick:this.handleMenuClick}))]:[r.a.createElement(Ee.a.Item,{key:"/login"},r.a.createElement(V.b,{to:"/login"},"Login")),r.a.createElement(Ee.a.Item,{key:"/signup"},r.a.createElement(V.b,{to:"/signup"},"Signup"))],r.a.createElement(je,{className:"app-header"},r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"app-title"},r.a.createElement(V.b,{to:"/"},"RunBook")),r.a.createElement(Ee.a,{className:"app-menu",mode:"horizontal",selectedKeys:[this.props.location.pathname],style:{lineHeight:"64px"}},e)))}}]),t}(n.Component);function Ce(e){var t=r.a.createElement(Ee.a,{onClick:e.handleMenuClick,className:"profile-dropdown-menu"},r.a.createElement(Ee.a.Item,{key:"user-info",className:"dropdown-item",disabled:!0},r.a.createElement("div",{className:"user-full-name-info"},e.currentUser.name)),r.a.createElement(Ee.a.Divider,null),r.a.createElement(Ee.a.Item,{key:"profile",className:"dropdown-item"},r.a.createElement(V.b,{to:"/editprofile"},"Edit Profile")),r.a.createElement(Ee.a.Item,{key:"logout",className:"dropdown-item"},"Logout"));return r.a.createElement(ye.a,{overlay:t,trigger:["click"],getPopupContainer:function(){return document.getElementsByClassName("profile-menu")[0]}},r.a.createElement("a",{className:"ant-dropdown-link"},r.a.createElement(M.a,{type:"user",className:"nav-icon",style:{marginRight:0}})," ",r.a.createElement(M.a,{type:"down"})))}var we=Object(g.g)(ke),Ne=a(169),Le=function(e){var t=e.component,a=e.authenticated,n=Object(Ne.a)(e,["component","authenticated"]);return r.a.createElement(g.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,Object.assign({},n,e)):r.a.createElement(g.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},Me=p.a.Content,Pe=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={currentUser:null,isAuthenticated:!1,isLoading:!1},a.handleLogout=a.handleLogout.bind(Object(h.a)(a)),a.loadCurrentUser=a.loadCurrentUser.bind(Object(h.a)(a)),a.handleLogin=a.handleLogin.bind(Object(h.a)(a)),o.a.config({placement:"topRight",top:70,duration:3}),a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"loadCurrentUser",value:function(){var e=this;this.setState({isLoading:!0}),(localStorage.getItem(f)?N({url:v+"/users/me",method:"GET"}):Promise.reject("No access token set.")).then((function(t){e.setState({currentUser:Object.assign({},t),isAuthenticated:!0,isLoading:!1})})).catch((function(t){e.setState({isLoading:!1})}))}},{key:"handleLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"You're successfully logged out.";localStorage.removeItem(f),localStorage.removeItem("userId"),this.setState({currentUser:null,isAuthenticated:!1}),this.props.history.push(e),o.a[t]({message:"RunBook App",description:a})}},{key:"componentWillMount",value:function(){this.loadCurrentUser()}},{key:"handleLogin",value:function(){o.a.success({message:"RunBook App",description:"You're successfully logged in."}),this.loadCurrentUser(),this.props.history.push("/")}},{key:"render",value:function(){var e=this;return this.state.isLoading?r.a.createElement(U,null):r.a.createElement(p.a,{className:"app-container"},r.a.createElement(we,{isAuthenticated:this.state.isAuthenticated,currentUser:this.state.currentUser,onLogout:this.handleLogout}),r.a.createElement(Me,{className:"app-content"},r.a.createElement("div",{className:"container"},r.a.createElement(g.d,null,r.a.createElement(g.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(T,e)}}),r.a.createElement(g.b,{path:"/login",render:function(t){return r.a.createElement(Z,Object.assign({onLogin:e.handleLogin},t))}}),r.a.createElement(g.b,{path:"/signup",component:re}),r.a.createElement(Le,{path:"/mypage",component:pe,authenticated:this.state.isAuthenticated,handleLogout:this.handleLogout,currentUser:this.state.currentUser}),r.a.createElement(Le,{authenticated:this.state.isAuthenticated,path:"/runs",component:G,handleLogout:this.handleLogout,currentUser:this.state.currentUser}),r.a.createElement(Le,{authenticated:this.state.isAuthenticated,path:"/posts",component:K,handleLogout:this.handleLogout,currentUser:this.state.currentUser}),r.a.createElement(Le,{authenticated:this.state.isAuthenticated,path:"/editprofile",component:be,handleLogout:this.handleLogout,currentUser:this.state.currentUser}),r.a.createElement(g.b,{component:ce})))))}}]),t}(n.Component),Ue=Object(g.g)(Pe);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(V.a,null,r.a.createElement(Ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[175,1,2]]]);
//# sourceMappingURL=main.38d40414.chunk.js.map